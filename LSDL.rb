require_relative 'helpers'
ciphertext = %Q{------ ------ .----. -....- -.-..- ..-... -----. ..-.-- .-..-. -.-... -.--.- -...-. -.--.- -..-.- -.--.- -.--.. -----. -----. -....- .----. -.-.-- -.-.-- -.--.. .---.. .----. .----. .--.-. .----. -----. -....- --..-. -.---. -...-. -..--- -.--.- -----. -...-. -----. -.-... -----. .----. -----. -.---- -----. .--.-. .-.--. .----. -..--. ------ -....- -----. -.-... -....- .---.- -.--.- -.---. -..--- .----. .----- -----. -..--- -.--.. --.... -.-... -----. -----. --..-. -...-. -..... -.---. -.---. .---.- .--.-- -.-... -----. -----. -..--- -.-... -..-.- -.--.- -..-.- .----. -....- ------ .-..-- -.---- .----. .----. -...-. -----. -..--- -.--.. .---.. -.-... -----. -----. --..-. -...-. -..... -.---. -.---. .---.- -...-. -.-... -----. -----. -..--- -.-... -..-.- -.--.- .--.-. -...-. -----. ------ ..-... -..--- .----. -..--. -..... -----. -..--- --.... -----. -....- -.--.- -----. -.--.- -..-.. -.-... .--.-. .----. .---.. -----. -----. .----. .--.-. -..--- .-.--. -----. .--.-- -----. .----. -.---- .----. -...-. .---.. -.-.-- .--.-. -.--.. -.--.- -----. -.---. -.---. -....- .--.-- -..--- .---.. .----. .--.-- -----. -----. -.-... -..-.- -.-.-- .--.-. -.---. -----. -.--.- --..-. .----. --..-. -..--. -.--.- -.--.- -.--.. -.---. -.--.. -..-.- -----. -----. -.-..- .--.-. -.-..- -----. --...- -..--- --..-. -.-... -----. .----. -.-... .--.-. --..-. -.-... -----. -.--.- -...-. -..-.- -.-.-- -..--- -.---. .--.-. -...-. -----. -.-... -.-.-- .----. -.-... -----. .---.- -..... -----. -..--. -----. -..-.- ..-... -.--.- -..--- ------ .--.-. -.--.. -----. -.--.. -.--.- -.---. -..... -.-... -.-... -.--.- -----. -..-.. -..-.- ..-..- .---.- -----. -..-.- .----. -----. -...-. ------ -.--.. ------ -.-... -----. -..--- ------ ------ -.---. -.--.- ..-.-. -----. -....- -...-. -----. -....- .--.-. -.--.- --.... -.--.- -.--.- -----. .----. -----. .--.-. .----. -.--.. -.--.. -.--.. -..--. -..... -.-... .----. -..--. .----- -.-... -.--.. -----. .---.. -..--. -.-.-- .--.-. -..-.- -.--.. .----- -.---. -----. -.-... -----. -..-.- -----. -----. -.-... -.--.- -..--. -.--.. -.---. -----. ------ .--... -.---. -.--.. -.-... -..-.. -..-.- -.-... -.-..- -----. -----. -.--.- -.-... -..--- ------ -----. -.-... .----. -----. .-..-. -...-. -..... -..--. .--.-. -....- -----. .--.-. .----. -.--.. -----. -.-..- -.--.- -.-.-- -.-... -----. -----. .--.-. -.--.- -..--. .----. -..--- -.--.- -..--- -.-... .--.-- -..-.- .----- -..-.- .----. -----. -.--.- -----. -.-... --.... .---.- .----. .-..-. -..--. ------ -----. -.-... .----. -.-... -.-..- -.--.- -----. .--.-. -.--.. -....- --.... -----. .--.-. --..-. .----. .---.- -.-... -.-... -..--- -----. -.--.- -..-.- .--.-. -----. -....- -..--- -----. .--.-- -.--.- -..... -----. -.--.- -...-. -.---. .--.-. -..-.. -----. -.--.. ------ -..--- .----. .---.- -.-.-- -.--.. -.-... -----. -...-. .----. -..-.. -.--.. -.-..- ..--.- --.... .--.-. -..... .--.-. -.-.-- --..-. -.---. -.--.. -----. -..--- -----. -.-... .----- -...-. -----. .---.- ..-... .----. -..--- -----. -.-.-- -----. .--.-. -----. -.--.. -..-.- -----. -.-... -..--- .---.. -..--- --..-. --..-. -.--.- .-.--. -.--.. -----. -....- -...-. .--.-. -----. ------ .----. .----. -.-... -.-... --..-. -----. .---.- -....- -.-.-- -----. -----. -....- -....- -..-.. -.--.- -...-. -..--- -.---. -.--.- -----. -.--.- .--.-- .--.-. -..-.. .---.. -.-... -.-... .--.-. -----. -----. .----. .----- .-.--. -..--. -----. -.-.-- -.-... -..--. -----. ------ -.-... .---.- -----. --..-. -.---. -.-... -----. -....- -----. -.-... -....- -..--- -.--.- --.... -.-... -..-.. -----. -.--.- -...-. -.-.-- -----. -.--.- -.--.- .-.--. .--.-. ------ -----. .----. -...-. -....- -.---- -.-.-- .----. -..--- --.... -----. .--.-. .----. .----. -.--.. -----. -.-... .----. -....- -.---- -.---. -----. -.-.-- --..-. .--.-. -.--.. -..--. -----. -..--- .---.- -..--. -.-... -----. -.---. .----. .--.-. -..--- -..... -----. .----. -.-... -.--.- .---.. -..--- .--.-- -..--- -.--.- -.--.- .---.. -.-..- -.-... -----. -...-. -----. .--.-. -.-.-- -----. .----. .----. --.... -.--.- -....- -.---. .----. -----. -..... -.--.- -....- .----- -.--.- -----. -.-... -...-. -....- -----. -----. .----. ------ -...-. --..-. .--.-. -..-.- .----. -.-.-- -.--.- ..-.-- -.--.- -.-..- -..-.- .----. -----. -.--.. -----. .----. .----. -..--- -----. -..-.- -..... -----. .---.- -.-... -...-. -..... -.--.. .----. -----. -----. .--.-- -..... ..-... -----. -...-. ------ .----. -.-... ------ -----. -.-... -.-.-- -----. .--... --..-. -.---. -.---. -.---- -.-.-- -..-.- -.-... .--.-. -----. -..-.- .----. .----. --..-. .----- -...-. .....- .---.- -----. .----. -..--- -----. -.-.-- ------}
nums = CodeHelpers.shitmorsetonumbers(ciphertext)
alphabet = 'abcdefghijklmnopqrstuvwxyz'
plaintext = []
nums.each do |n|
  if n < 26
    plaintext << alphabet[n].upcase
  elsif n >= 26 && n <= 54
    plaintext << alphabet[n-26]
  elsif n == 62
    plaintext << " "
  elsif n == 63
    plaintext << "."
  end
end
ciphertext = plaintext.join # length 660
factors = [2, 3, 4, 5, 6, 10, 11, 12, 15, 20, 22, 30, 33, 44, 55, 60, 66, 110, 132, 165, 220, 330]
puts ciphertext
# [66,46,26].permutation(2).each do |rows,offset|
#   offset_cipher = CodeHelpers.cycle_str(ciphertext,offset)
#   puts CodeHelpers.rf_decrypt(offset_cipher, rows,false)
#   puts CodeHelpers.rf_decrypt(offset_cipher, rows,true)
# end


# tried columnar transposition
# factors = [3, 4, 5, 6, 10, 11, 12, 15, 20, 22, 30, 33, 44, 55, 60, 66, 110, 132, 165, 220]
# factors.each do |num_columns|
#   num_rows = halfwaycipher.length / num_columns
#   plaintext_matrix = Array.new(num_rows) { Array.new(num_columns) }

#   # Fill the matrix column by column
#   index = 0
#   (0...num_columns).each do |col|
#     (0...num_rows).each do |row|
#       plaintext_matrix[row][col] = halfwaycipher[index]
#       index += 1
#     end
#   end

#   puts num_columns
#   puts plaintext_matrix.flatten.join("")
#   puts " "
# end