require_relative 'helpers'
ciphertext = %Q{.....- -..--- --..-. -..--. .....- -.-..- -----. -..... -----. .----. -.---. .----. -----. -----. -.-... -.--.- -.--.- -----. .-..-. -..--. .----- -....- -----. -.--.- -.-... .----. -----. -.-... -...-. -.-... -.-.-- -----. .----. .---.- -..--. -----. -.-.-- .--.-. --...- -----. .--.-. -....- --..-. -..-.- -.-..- -.-... -..... .----. -----. -..-.- .----. .----- -...-. .--.-. .----- -----. -.-.-- -----. -..--- -.-.-- -.-... .--.-. -...-. -.--.- .----. -----. -.-.-- .--.-- .----. -.-.-- -----. .----- -----. -.-... -..--- .--.-. .--.-- -.-.-- -.--.- -.---. .---.. -.---- .----. -.-... -....- -.--.- .----. .----. -...-. -..--. .----. ------ -----. -..-.- -..--- -----. -----. -----. .--.-. ------ -..... --..-. -..-.- .-.--. -..--- -----. -----. -.-... .--.-. .----. .---.- ....-. .--.-. -.---. -.--.- -----. -----. -..-.- .--.-- -----. .----. -.--.. -..--. .----. -..-.- -.--.. -----. .--.-. -.-... .--.-. .----. -.-... -.-.-- --.... -.-.-- -.-.-- -----. -.-... .----. -----. .----. -..-.- -.--.- -..--- -.-..- .--.-. -----. --..-. -.-... ------ -..-.- -..-.- -.--.- -----. -----. -----. --..-. -..-.- -.-... --..-. -.--.- ...... -----. -----. -----. -.-... -.-.-- -..-.- -.-... -.--.- -.--.- -.---. .--.-. -.--.. -..--- -....- .----. -----. -.---- -.-... -----. .----. -..-.- .--.-. .----. -----. .----. -----. -..-.- -..-.- -..-.- ..-... -.---- .--.-. -----. -..-.- -----. -----. .----. -..--. --..-. -----. -.--.- -..-.. -.-.-- .--.-. -.-... --.... -.-... .----. --..-. --..-- -.---. -.-... -----. .----. -.--.- -...-. -----. -.---. .--.-. -.-..- -....- -..--- .--.-. -..-.- -..--- -----. -...-. -..... .--.-- .---.- --..-. .----- -..--- -----. -.-... -----. --.... -.-... -..... -.--.- -.---. .--.-- -....- -.-.-- ------ -....- -.--.- .----. .----. -..... -----. -...-. -----. -----. -.-.-- .----. ..-... -..--- -.-... -.--.. .----. -.--.- -----. -..... -.---. -..--. -----. -.--.- --.... -.--.. -.-.-- .--.-. --..-. -...-. .--.-. -----. -----. -.-.-- -.-... -..--- -..--- --..-. -...-- -.--.- -.---. -..... -.--.- -.-... -.-... -----. -----. -----. .----. -.---. -.---. .----. --.... -.--.- .---.- -----. -.-.-- -..--- -.-... -....- -----. -....- -..--- -.-... -.---. -.-... -.--.- .--.-. .----. -.---. -..-.- -.--.. -.-... .---.- --..-. -..... .---.- .----. -----. -----. -.--.. -....- -----. -----. -..-.- -..--. ------ -----. -..-.- --.... .----. .----. -----. -.--.- -...-. .----. -.--.- -..--- ..-... -.-... -..-.. -...-. -----. -.--.- -----. -----. .----. -.-.-- --..-. -...-. .---.- -....- -----. .---.- -.-... -.-... -.-... .--.-. -.--.. -----. -.---. -..--- -----. -..--- -.-... -..-.- -----. .----. -....- .---.- -----. -...-. -..-.. .---.- .--.-. -..-.- -.--.. -.--.- -..--- ------ -.---- .----. -...-. -.--.- -.-... -----. .----. -----. -..--. -..-.- --.... ..-... -----. -.--.. -.-..- .----. -----. -.--.- -.--.- -.-... -..-.- -----. -.--.- -----. -.-... -..--. --..-. -..-.- -....- -.-.-- -----. .----. ------ -...-. .--.-. .----. .--.-. -.--.- -----. -.--.- -.--.- .--.-. -.--.. -....- .-..-- .--.-. -----. -..-.- -..-.. -...-. -....- -..--- ..-... -..-.- -----. -..--- -...-. -...-. -----. --..-. --..-. -..... -.--.. .----. -....- -----. -.-... -----. -----. -.--.. .--.-. -...-. -.---. -..-.- .---.. -----. -.---- -.--.. -----. -...-. -.-... --..-. .----. -----. -.--.. -..-.. -.---. -.-... -----. -.--.- -.-... .----. -..-.- -.---. -.--.- -....- -..--. -----. .---.- -----. .--.-. .----. .----. -.--.- -----. --.... -..-.. -----. -.--.- -....- .--.-- -.-.-- .----. -..--. -....- .--.-. .----. -...-. -..--- -.-... -...-. -.--.- -----. -.--.- -----. -.--.. -..--- ------ .--.-. .----. .--.-. -.--.- -..... -----. -----. ------ -----. -----. ------ ..-... --.... -----. .----- --.... -----. -----. -.-... ..---- .----. -.-... ...--- --.... -..--- -..-.- --.... -..--- .--.-. -...-. .---.- .----. -----. .---.- -.---- -..-.- .----. .--.-. -.-... .----. .----. -..-.- -.-.-- -.--.. .----- -.-.-- -----. -----. .----- .----. -----. .----- --..-. -..-.- -.---. -----. -..--. -.---. -.-... .----. -..-.- -.-.-- --..-. -..-.- -.---. .--.-. -----. .----. -----. -----. -----. -.---- -..--- -..--. .----- -.-..- .--.-. .----. .----. -...-. -.-.-- -..-.- -..-.- -----. --.... -..--- -...-. .--.-. -..-.- -.--.- -----. .---.- .----. .---.. -----. -....- -.-.-- -----. -..--- .----. -.--.- .----. .----. -..--. .---.- -----. -....- -----. -.---- .----. -.--.. .----- -.-... .---.- .----. -----. -----. -.---. -.---. .----. -..-.- --.... -...-. -..-.- -..... -.--.- .--.-. -....- -..--- -..-.- -....- .--.-. -.--.- .----. -.--.- -----. -.--.- -...-. -...-. -..--- -.-... -.-... -----. -..-.- -.-... -----. -----. .----- .--.-. -.--.. -..--- --..-. -.--.- -----. .--.-- -----. -----. -.-... -....- -..--. -.-... -.--.- -...-. -.---. .----. --..-. -.---. -.-... -..--- -----. -----. -.--.. -.--.- -----. -----. -..... -.-..- -.--.- -----. --..-. -.-... .----. -..-.- .----. -..--. -.-... -.---. -.--.- .--.-. -.-.-- .--.-. -.---. -.-.-- -----. .---.. -...-. -..-.. -----. -----. -.--.- .----. .----. -...-. -...-. .--.-. -....- -----. -.--.. -..--- -..--- .---.- .----. --..-. ------ -..... -----. -.---- -----. -.-... -----. -----. -.--.- .----. .---.. -.---. .-.--. -.--.- -....- -..--- -....- -----. .----. -....- .--.-. -.--.- .--.-. --.... -----. -...-. -.--.- -.---. -..--- .----. -..... -.--.. -----. -.-.-- .---.. -.-.-- -.-... -----. -.-.-- .----. .----. .----. -.--.- -...-. .----. -.--.. ------ -----. -----. -..--- -..... ------ -----. -.--.- -.-..- -.--.- .--.-. -----. -----. .----. -..-.- -.-... -.-.-- ..-... ..-.-- -..-.- .----. -----. .---.- -----. ------ -..-.- -..--- .--.-. ------ -....- .-..-. -...-. -.--.- -----. -----. -.-... --....}
nums = CodeHelpers.shitmorsetonumbers(ciphertext)

alphabet = 'abcdefghijklmnopqrstuvwxyz'
plaintext = []
nums.each do |n|
  if n < 26
    plaintext << alphabet[n].upcase
  elsif n >= 26 && n <= 54
    plaintext << alphabet[n-26]
  elsif n == 62
    plaintext << " "
  elsif n == 63
    plaintext << "."
  end
end
halfwaycipher = plaintext.join('')
factors = [3, 5, 6, 9, 10, 15, 18, 27, 30, 45, 54, 81, 90, 135, 162, 270]
factors.each do |num_columns|
  num_rows = halfwaycipher.length / num_columns
  plaintext_matrix = Array.new(num_rows) { Array.new(num_columns) }

  # Fill the matrix column by column
  index = 0
  (0...num_columns).each do |col|
    (0...num_rows).each do |row|
      plaintext_matrix[row][col] = halfwaycipher[index]
      index += 1
    end
  end

  puts num_columns
  puts plaintext_matrix.flatten.join("")
  puts " "
end